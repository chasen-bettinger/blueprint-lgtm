// Generated by CoffeeScript 1.6.3
(function() {
  var RestAPI;

  RestAPI = (function() {
    function RestAPI(host, port, pfx, version) {
      port = String(port);
      if (port.length) {
        port = ':' + port;
      }
      if (pfx.length) {
        pfx = '/' + pfx;
      }
      if (version.length) {
        version = '/' + version;
      }
      this.route_prefix = "//" + host + port + pfx + version + "/";
    }

    RestAPI.prototype.call = function(type, route, debug_source, data) {
      var f, result;
      f = "RestAPI.call:" + debug_source + ":" + type + ":" + route + ":";
      _log2(f, data);
      result = false;
      $.ajax({
        url: this.route_prefix + route,
        data: data,
        type: type,
        dataType: 'json',
        async: false,
        cache: false
      }).done(function(data, textStatus, jqXHR) {
        return result = data;
      }).fail(function(jqXHR, textStatus, errorThrown) {
        return result = JSON.parse(jqXHR.responseText);
      });
      return result;
    };

    return RestAPI;

  })();

  window.EpicMvc.Extras.RestAPI = RestAPI;

}).call(this);
