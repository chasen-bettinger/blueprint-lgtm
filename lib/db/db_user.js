// Generated by CoffeeScript 1.6.3
(function() {
  var Q, User;

  Q = require('q');

  User = (function() {
    function User(db, log) {
      this.db = db;
      this.log = log;
    }

    User.prototype.create = function(conn, first_name, last_name, email, password) {
      var f,
        _this = this;
      f = 'DB.User:';
      this.log.debug(f, first_name, last_name, email, password);
      return Q.resolve().then(function() {
        var sql;
        sql = 'INSERT INTO t1_users (first_name, last_name, email, password, created) VALUES (?,?,?,?,NULL)';
        return _this.db.sqlQuery(conn, sql, [first_name, last_name, email, password]);
      }).then(function(db_result) {
        if (db_result.affectedRows !== 1) {
          throw new Error('DB_500_USERS_CREATE');
        }
        return true;
      });
    };

    return User;

  })();

  exports.User = User;

}).call(this);
